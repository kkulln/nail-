from flask import Flask, request, jsonify
from flask_cors import CORS
from datetime import datetime

app = Flask(__name__)

CORS(app, resources={r"/*": {"origins": "*"}})

reservations = []

@app.route("/reserve", methods=["POST", "OPTIONS"])
def reserve():
    data = request.get_json(force=True)

    reservation = {
        "menu": data.get("menu"),
        "name": data.get("name"),
        "email": data.get("email"),
        "date": data.get("date"),
        "time": data.get("time"),
        "message": data.get("message"),
        "created_at": datetime.now().isoformat()
    }

    reservations.append(reservation)

    return jsonify({
        "status": "success",
        "reservation": reservation
    })

@app.route("/reservations", methods=["GET"])
def get_reservations():
    return jsonify(reservations)

@app.route("/")
def home():
    return "Reservation server running"

app.run(host="0.0.0.0", port=5000)
